// main global script file
int gold;
export gold;
String goldAsText;
export goldAsText;
String speciesName;
export speciesName;
String placeContent;
export placeContent;

// called when the game starts, before the first room is loaded
function game_start() 
{
    //Audio volume stuff
    Game.SetAudioTypeVolume(eAudioTypeSound,  sfxSlider.Value, eVolExistingAndFuture);
  gold = 300;
  placeContent = "Nowhere";
  speciesName = "None";
}

// put anything you want to happen every game cycle in here
function repeatedly_execute() 
{
  goldAsText = String.Format("%d", gold);
  goldContent.Text = goldAsText;
  speciesContent.Text = speciesName;
  locationLabel.Text = placeContent;
}

// put here anything you want to happen every game cycle, even when the game is blocked
function repeatedly_execute_always() 
{
}

// called when a key is pressed. keycode holds the key's ASCII code
function on_key_press(eKeyCode keycode) 
{
  if (IsGamePaused()) keycode = 0; // game paused, so don't react to keypresses
  
  if (keycode == eKeyCtrlQ) QuitGame(1); // Ctrl-Q
  if (keycode == eKeyF9) RestartGame(); // F9
  if (keycode == eKeyF12) SaveScreenShot("scrnshot.pcx");  // F12
  if (keycode == eKeyCtrlS) Debug(0,0); // Ctrl-S, give all inventory
  if (keycode == eKeyCtrlV) Debug(1,0); // Ctrl-V, version
  if (keycode == eKeyCtrlA) Debug(2,0); // Ctrl-A, show walkable areas
  if (keycode == eKeyCtrlX) Debug(3,0); // Ctrl-X, teleport to room
}

function on_mouse_click(MouseButton button) // called when a mouse button is clicked. button is either LEFT or RIGHT
{
  if (IsGamePaused() == 1) // Game is paused, so do nothing (ie. don't allow mouse click)
  {
  }
  else if (button == eMouseLeft) 
  {
    Room.ProcessClick(mouse.x,mouse.y, mouse.Mode);
  }
  else // right-click, so cycle cursor
  {   
    mouse.SelectNextMode();
  }
}


function dialog_request(int param) {
}
function Button1_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
QuitGame(0);
}


function btnCancelSave_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
gSavegame.Visible = false;
}

function btnConfirmSave_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
int totalSaves = lstSaveGames.ItemCount; //number of saves on list
 String saveName = txtSaveName.Text; //holds value of txtSaveName
 
 //Check for a save name. If none, tell them.  Else, go on.
 if(saveName == "")
 {
   Display("Please enter a name for your saved game.");
   return;
 }
 //If there is no saved games yet, just save it.
 if(lstSaveGames.SelectedIndex == -1)
 {
   gSavegame.Visible = false;
   SaveGameSlot(totalSaves+1, saveName);
 }
 else
 {
   int checkSave = 0; //runs through the list and checks for double entries
   while(checkSave != totalSaves)
   {
     if(saveName == lstSaveGames.Items[checkSave]) // one matches, so overwrite it.
     {
       //if so, overwrite the selected save game
       gSavegame.Visible = false;
       SaveGameSlot(savegameindex[checkSave], saveName);
       return;
     }
     checkSave++;
   }
   //if we've made it here, then there is no match; just save to a new slot.
   if(totalSaves < 20)
   {
     gSavegame.Visible = false;
     SaveGameSlot(totalSaves+1, saveName);
   }
   else
   {
     Display("The maximum number of saved games has been reached; overwrite or delete some old ones.");
   }
 }
}

function btnDeleteSave_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
if(lstSaveGames.SelectedIndex != -1)
 {
   DeleteSaveSlot(savegameindex[lstSaveGames.SelectedIndex]);
   //Save Dialog Prep
   lstSaveGames.FillSaveGameList();
 }
 else
 {
   Display("Please select a saved game to delete.");
 }
}

function lstSaveGames_OnSelectionChange(GUIControl *control)
{
    aAction.Play();
 //put the selection in the save txt box
  txtSaveName.Text = lstSaveGames.Items[lstSaveGames.SelectedIndex];
}

function txtLoadName_OnActivate(GUIControl *control)
{
txtLoadName.Clickable = false;
}

function btnConfirmLoad_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
int totalLoads = lstLoadGames.ItemCount; //holds number of saves in the list
 String loadName = txtLoadName.Text; //holds TXT for Save Name; from use
 
 //check that a name was entered to avoid problems
 if(loadName == "") 
 {
   Display("Please select a saved game to be loaded.");
   return;
 }
 if(lstLoadGames.SelectedIndex == -1) //no highlighted item
 {
   Display("Please select a saved game to be loaded");
 }
 else if(lstLoadGames.SelectedIndex >= 0) //an item is selected... 
 {
   RestoreGameSlot(savegameindex[lstLoadGames.SelectedIndex]);
   gLoadgame.Visible = false;
 }
}

function loadGameButton_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gLoadgame.Visible = true;
}

function btnCancelLoad_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
gLoadgame.Visible = false;
}

function btnDeleteLoad_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
if(lstLoadGames.SelectedIndex != -1)
 {
   DeleteSaveSlot(savegameindex[lstLoadGames.SelectedIndex]);
   //Save Dialog Prep
   lstLoadGames.FillSaveGameList();
 }
 else
 {
   Display("Please select a saved game to delete.");
 }
}

function newGameButton_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
cCharacter.ChangeRoom(2);
}
function btnFox_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Fox";
player.ChangeRoom(3);
}

function btnWolf_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Wolf";
player.ChangeRoom(3);
}

function btnDog_OnClick(GUIControl *control, MouseButton button)
{
   aAction.Play();
speciesName = "Dog";
player.ChangeRoom(3);
}

function btnDragon_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Dragon";
player.ChangeRoom(3);
}

function btnCat_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Cat";
player.ChangeRoom(3);
}

function btnTiger_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Tiger";
player.ChangeRoom(3);
}

function btnLion_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Lion";
player.ChangeRoom(3);
}

function btnRaccoon_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Raccoon";
player.ChangeRoom(3);
}

function btnRabbit_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Rabbit";
player.ChangeRoom(3);
}

function btnSkunk_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Skunk";
player.ChangeRoom(3);
}

function btnBear_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Bear";
player.ChangeRoom(3);
}

function btnOtter_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Otter";
player.ChangeRoom(3);
}

function btnHorse_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Horse";
player.ChangeRoom(3);
}

function btnCoyote_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Coyote";
player.ChangeRoom(3);
}

function btnCheeta_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Cheetah";
player.ChangeRoom(3);
}

function btnHyena_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Hyena";
player.ChangeRoom(3);
}

function btnSLeopard_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Snow Leopard";
player.ChangeRoom(3);
}

function btnKangaroo_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Kangaroo";
player.ChangeRoom(3);
}

function btnCrow_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Crow";
player.ChangeRoom(3);
}

function btnRat_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Rat";
player.ChangeRoom(3);
}

function btnParrot_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Parrot";
player.ChangeRoom(3);
}

function btnCrux_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Crux";
player.ChangeRoom(3);
}

function btnCougar_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Cougar";
player.ChangeRoom(3);
}

function btnFerret_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Ferret";
player.ChangeRoom(3);
}

function btnGryphon_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Gryphon";
player.ChangeRoom(3);
}

function btnLeopard_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Leopard";
player.ChangeRoom(3);
}

function btnLynx_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Lynx";
player.ChangeRoom(3);
}

function btnGecko_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Gecko";
player.ChangeRoom(3);
}

function btnRaptor_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Raptor";
player.ChangeRoom(3);
}

function btnKobold_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
speciesName = "Kobold";
player.ChangeRoom(3);
}



function btnshakeHands1_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(4);

}

function btnRefuseShakeHands1_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(5);
}

function Button2_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(6);
}

function Button3_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(6);
}

function btnBack_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gsettings.Visible = false;
}

function btnOptions_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gsettings.Visible = true;
}

function sfxSlider_OnChange(GUIControl *control)
{
Game.SetAudioTypeVolume(eAudioTypeSound, sfxSlider.Value, eVolExistingAndFuture);
}

function btnChangeBack_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gChangelog.Visible = false;
}

function Changelogmm_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gChangelog.Visible = true;
}

function btnoutsidePherian1Next_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(7);
}

function btnBackHome_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gbrickwall.Visible = false;
player.ChangeRoom(1);
}

function btnInGameSave_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gSavegame.Visible = true;
}

function Button5_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gLoadgame.Visible = true;
}

function Button6_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
gsettings.Visible = true;
}

function btnFrontDoorToPherian_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(8);
}

function btnPortCullisNext_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(9);
}

function btnFollowJax_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(10);
}

function btnFollowJaxInside_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(11);
}

function Button7_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(12);
}

function Button8_OnClick(GUIControl *control, MouseButton button)
{
    aAction.Play();
ShellExecute("", "https://www.ko-fi.com/dragonwolf","");
}

function Button9_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(13);
}

function Button4_OnClick(GUIControl *control, MouseButton button)
{
aAction.Play();
player.ChangeRoom(14);
}
